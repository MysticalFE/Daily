# 转义字符（\）对 JOSN.parse 的解析影响

## 抛出一个问题

怎么让下面 json 字符串经过 json 解析后在页面显示原始数据，包括转义反斜杠

```javascript
const objStr = `
{  
    a : "b",  
    b : "\\",  
    c : {  
        b : "\\",   
        a : {   
            b : "\\"   
        }  
    }  
};
`;
```

## JSON.parse 规则

一般来说在 JSON.parse 的参数包含转移字符的时候会遇到两次转义的问题，其实第一次是字符串本身的转义，第二次是将真正转为 js 对象的转义。
举例如下：
将字符串`{"a":"b","b":"\\\\"}`传递给`JSON.parse`，首先解析器提取单引号括起来的字符串时认为第一个`\`转义第二个`\`第三个`\`转义第四个`\`，也就是说实际可输出字符串是`{"a":"b","b":"\\"}`（可通过`console.log('{"a":"b","b":"\\\\"}')`验证），之后正式转为`js`对象的时候还有一次转义，也就是实际输出字符转中的第一个`\`转义第二个`\`（此时只有两个`\`）。
所以`console.log(JSON.parse('{"a":"b","b":"\\\\"}') )`;输出结果为`Object {a: "b", b: "\"}`，也就是说实际显示的数据为一个\（实际可输出一个`\`说明在此之前还有一个`\`）。

根据转义规则，实际输出一个`\`在这个`\`之前必定有一个`\`。所以如上第一行输出按照书写来说为`'{"a":"b","b":"\\\\","c":{"b":"\\\\","a":{"b":"\\\\"}}}'`，可通过第三条输出来验证。

## 总结

如果想在 js 对象中出现一个`\`，需要在 json 字符串中出现四个`\` 。

## 对于其他的其他的特殊字符

1.双引号`（"）`，如果正确出现双引号应为`\\\"` 2.`\n`，如想想出现正确的换行需要 json 字符串中是`\\n`，其实是先对`\n`中的`\`转义，`n`变成了普通字符，在解析为 js 对象的时候`n`与之前的`\`（只有一个\了）被解释为换行。如下的两个与此类似。 3.`\r`，`\\r` 4.`\t`，`\\t`
